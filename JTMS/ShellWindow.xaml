<Window
    x:Class="JTMS.ShellWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:VM="clr-namespace:JTMS.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:JTMS"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:JTMS.Views"
    Title="JTMS"
    Width="1200"
    Height="900"
    MinWidth="750"
    MinHeight="500"
    Background="WhiteSmoke"
    WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d">

    <Window.DataContext>
        <VM:ShellViewModel />
    </Window.DataContext>

    <Window.Resources>

        <Storyboard x:Key="HideNav">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="NavPanel" Storyboard.TargetProperty="(FrameworkElement.Width)">
                <EasingDoubleKeyFrame KeyTime="00:00:00.4" Value="60" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="ViewNav">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="NavPanel" Storyboard.TargetProperty="(FrameworkElement.Width)">
                <EasingDoubleKeyFrame KeyTime="00:00:00.4" Value="170" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="ToggleButton.Checked" SourceName="NavToggleBtn">
            <BeginStoryboard x:Name="hideNav" Storyboard="{StaticResource HideNav}" />
        </EventTrigger>
        <EventTrigger RoutedEvent="ToggleButton.Unchecked" SourceName="NavToggleBtn">
            <BeginStoryboard x:Name="viewNav" Storyboard="{StaticResource ViewNav}" />
        </EventTrigger>
    </Window.Triggers>

    <materialDesign:DialogHost
        Background="Transparent"
        CloseOnClickAway="False"
        Identifier="RootDialogHost"
        Placement="Center">
        <Grid>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <materialDesign:Card
                Grid.Row="0"
                Grid.RowSpan="2"
                Grid.Column="0"
                BorderThickness="0"
                UniformCornerRadius="0">
                <Grid
                    x:Name="NavPanel"
                    Grid.Row="1"
                    Width="170"
                    Background="#3F494D">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" Height="50">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="auto" />
                        </Grid.ColumnDefinitions>

                        <ToggleButton
                            x:Name="NavToggleBtn"
                            Grid.Column="0"
                            Grid.ColumnSpan="3"
                            Height="50"
                            Margin="5,5,13,5"
                            Padding="5"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            materialDesign:ButtonAssist.CornerRadius="5"
                            materialDesign:ToggleButtonAssist.OnContent="{materialDesign:PackIcon Kind=HamburgerMenu,
                                                                                                  Size=40}"
                            Background="Transparent"
                            BorderThickness="0"
                            Content="{materialDesign:PackIcon Kind=HamburgerClose,
                                                              Size=40}"
                            Cursor="Hand"
                            Focusable="False"
                            Foreground="White"
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            WindowChrome.IsHitTestVisibleInChrome="True" />

                    </Grid>

                    <materialDesign:TransitioningContent Grid.Row="1" OpeningEffect="{materialDesign:TransitionEffect Kind=SlideInFromLeft, Duration=0:0:1}">
                        <materialDesign:Card Background="Transparent">
                            <ItemsControl
                                Background="Transparent"
                                BorderThickness="0"
                                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                ScrollViewer.VerticalScrollBarVisibility="Disabled">

                                <materialDesign:TransitioningContent OpeningEffect="{materialDesign:TransitionEffect Kind=SlideInFromLeft, Duration=0:0:.5}">
                                    <RadioButton
                                        Margin="0,10,0,0"
                                        Command="{Binding ChangeViewCommand}"
                                        CommandParameter="Home"
                                        IsChecked="true"
                                        Style="{StaticResource NavButtonTheme}">
                                        <RadioButton.Content>
                                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                                <materialDesign:PackIcon
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"
                                                    Kind="Home" />
                                                <TextBlock
                                                    Margin="20,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="16"
                                                    Text="Home" />
                                            </StackPanel>
                                        </RadioButton.Content>
                                    </RadioButton>
                                </materialDesign:TransitioningContent>

                                <materialDesign:TransitioningContent OpeningEffect="{materialDesign:TransitionEffect Kind=SlideInFromLeft, Duration=0:0:.5}">
                                    <RadioButton
                                        Margin="0,10,0,0"
                                        Command="{Binding ChangeViewCommand}"
                                        CommandParameter="Project"
                                        IsChecked="{Binding IsProjectChecked}"
                                        Style="{StaticResource NavButtonTheme}">
                                        <RadioButton.Content>
                                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                                <materialDesign:PackIcon
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"
                                                    Kind="Factory" />
                                                <TextBlock
                                                    Margin="20,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="16"
                                                    Text="Projects" />
                                            </StackPanel>
                                        </RadioButton.Content>
                                    </RadioButton>
                                </materialDesign:TransitioningContent>

                                <materialDesign:TransitioningContent OpeningEffect="{materialDesign:TransitionEffect Kind=SlideInFromLeft, Duration=0:0:.5}">
                                    <RadioButton
                                        Command="{Binding ChangeViewCommand}"
                                        CommandParameter="Company"
                                        IsChecked="{Binding IsCompanyChecked}"
                                        Style="{StaticResource NavButtonTheme}">
                                        <RadioButton.Content>
                                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                                <materialDesign:PackIcon
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"
                                                    Kind="Company" />
                                                <TextBlock
                                                    Margin="20,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="16"
                                                    Text="Companies" />
                                            </StackPanel>
                                        </RadioButton.Content>
                                    </RadioButton>
                                </materialDesign:TransitioningContent>

                                <materialDesign:TransitioningContent OpeningEffect="{materialDesign:TransitionEffect Kind=SlideInFromLeft, Duration=0:0:.5}">
                                    <RadioButton
                                        Command="{Binding ChangeViewCommand}"
                                        CommandParameter="Settings"
                                        Style="{StaticResource NavButtonTheme}">
                                        <RadioButton.Content>
                                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                                <materialDesign:PackIcon
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"
                                                    Kind="Settings" />
                                                <TextBlock
                                                    Margin="20,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="16"
                                                    Text="Settings" />
                                            </StackPanel>
                                        </RadioButton.Content>
                                    </RadioButton>
                                </materialDesign:TransitioningContent>

                            </ItemsControl>
                        </materialDesign:Card>
                    </materialDesign:TransitioningContent>

                    <Image
                        Grid.Row="2"
                        Margin="7"
                        Source="Images/MP_logo1.png " />

                </Grid>
            </materialDesign:Card>

            <ContentControl
                Grid.Row="1"
                Grid.Column="1"
                Margin="5"
                Content="{Binding CurrentViewModel}"
                Focusable="False"
                IsTabStop="False">
                <ContentControl.Resources>

                    <DataTemplate DataType="{x:Type VM:HomeViewModel}">
                        <views:HomeView />
                    </DataTemplate>

                    <DataTemplate DataType="{x:Type VM:ProjectShellViewModel}">
                        <views:ProjectShell />
                    </DataTemplate>

                    <DataTemplate DataType="{x:Type VM:CompanyViewModel}">
                        <views:CompanyView />
                    </DataTemplate>

                    <DataTemplate DataType="{x:Type VM:SettingsViewModel}">
                        <views:SettingsView />
                    </DataTemplate>

                </ContentControl.Resources>
            </ContentControl>

        </Grid>
    </materialDesign:DialogHost>
</Window>
